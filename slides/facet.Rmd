---
---

## Facets

To conclude this overview of [ggplot2](){:.rlib}, we'll apply the same plotting
instructions to different subsets of the data, creating panels or "facets".

The `facet_wrap` function takes a `vars` argument that, like the `aes` function,
relates a variable in the dataset to a visual element, the panels. The
`facet_grid` function works like `facet_wrap`, but expects two variables to
facet by the interaction of a row variable by a column variable.
{:.notes}

===

The gender wage gap apparent in the US Census PUMS data is probably not
consistent across people who obtained different levels of education.

Before we plot the data, we can recode the levels of school in `SCHL` from a numeric code to the highest education level as we want displayed. 
```{r, handout = 0}
pums$SCHL <- factor(pums$SCHL)
levels(pums$SCHL) <- list(
  'High School' = '16',
  'Bachelor\'s' = '21',
  'Master\'s' = '22',
  'Doctorate' = '24')
```

The [technical
documentation](https://www.census.gov/programs-surveys/acs/technical-documentation/pums/documentation.2017.html)
for the PUMS data includes a data dictionary, explaining the codes used for
education attainment, and everything else you'ld like to know about the dataset.
{:.notes}

===

The `sex_wagp` plot created above stored it's own copy of the data, so create a
new `ggplot` foundation using a cleaned up dataset. The data for ggplot in this case has the na's removed by using the command `na.omit`.

```{r, handout = 0}
ggplot(na.omit(pums),
  aes(x = SEX, y = WAGP)) + 
  geom_point() +
  geom_smooth(
    method = 'lm',
    aes(group = 0)) +
  facet_wrap(vars(SCHL))
```

Adding `facet_wrap(vars(SCHL))` creates 4 separate plots, 1 for each level of eduction attainment.

===

Question
: What wage gap trend do you think is worth investigating, and how might you
do it?

Answer
: {:.fragment} There are so many possibilities! For example, a scatterplot of
wage against age colored by sex that includes a fitted regression model.
